!
! Skew-t support stuff.
!
!
! The Skewt Adjust Limits submenu
!
define widget adjust-skewt-limits intmenu 'Adjust Limits'
	title 'Adjust Limits'
	line
	entry 'Pressure' 'i_adjust pres-limit-proc'
	entry 'Temperature' 'i_adjust temp-limit-proc'
endmenu

!
! The Skew-t left button menu.
!
define widget skewt-left intmenu 'Skewt left'
	title 'Overlay Operations'
	line
	submenu 'Adjust Limits' 'adjust-skewt-limits'
	line
	entry 'Raise to top' 'move #icon_component 0'
	entry 'Move to bottom' 'move #icon_component 1'
	entry 'Remove' 'i_remove_component'
endmenu

!
! Menu for top annotation.
!
define widget skewt-topannot intmenu 'stuff'
	title 'Skew-t platforms'
	line
	entry 'Remove this platform' 'skewt-remove'
endmenu

procedure skewt-remove 
	local plats PDParam(icon_component,'platform')
!
! If we are the only platform we really want to substitute "null".  Kludge.
!
	if (plats = icon_platform)
	   	parameter #icon_component platform null
		return
	endif
!
! Nope, there are others.  Just clean this one out.
!
	local pos ListPosition(icon_platform, plats)
	local plats quote(RmElement(plats,pos))
	parameter #icon_component platform #plats
endprocedure



!
! Toggle between ft and km.
!
define widget feet-km intmenu 'feet/km'
	title 'Altitude units'
	line
	entry 'Feet' 'do-feet-proc true'
	entry 'Kilometers' 'do-feet-proc false'
endmenu

procedure do-feet-proc value string
	parameter #icon_component do-feet #value
endprocedure
