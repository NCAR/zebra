
SRCS = pdmon.c
OBJS = pdmon.o
HEADERS = pdmon.h
ELISPFILES = pd-utils.el pd-utils19.el
ECOMPILE = emacs -batch -f batch-byte-compile

LIBS = $(LIBZEB) $(LIBRDSS)
DISTFILES = $(SRCS) $(HEADERS) $(ELISPFILES) Imakefile

NormalProgramTarget(pdmon, $(OBJS), $(DEPLIBS), $(LIBS), /**/)
BuildIncludes (pdmon.h,.,.)

/*
 * Specialty stuff for the elisp file.  We don't build a byte compiled 
 * version of pd-utils19, since GNU Emacs V19 or greater is required, and 
 * that's a pain to test for.
 */
all::	pd-utils.elc

pd-utils.elc:	pd-utils.el
	$(ECOMPILE) `pwd`/pd-utils.el

InstallNonExec(pd-utils.elc,$(LIBDIR))

InstallNonExec(pd-utils19.el,$(LIBDIR))

clean::
	$(RM) *.elc

DependTarget()
LintTarget()
DistfilesTarget($(DISTFILES))
