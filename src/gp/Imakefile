/**/# ---------------------------------------------------------------------
/**/# $Id: Imakefile,v 1.22 1995-05-24 22:08:19 granger Exp $ 

/*		Copyright (C) 1987,88,89,90,91 by UCAR
 *	University Corporation for Atmospheric Research
 *		   All rights reserved
 *
 * No part of this work covered by the copyrights herein may be reproduced
 * or used in any form or by any means -- graphic, electronic, or mechanical,
 * including photocopying, recording, taping, or information storage and
 * retrieval systems -- without permission of the copyright owner.
 * 
 * This software and any accompanying written materials are provided "as is"
 * without warranty of any kind.  UCAR expressly disclaims all warranties of
 * any kind, either express or implied, including but not limited to the
 * implied warranties of merchantibility and fitness for a particular purpose.
 * UCAR does not indemnify any infringement of copyright, patent, or trademark
 * through use or modification of this software.  UCAR does not provide 
 * maintenance or updates for its software.
 */


LIBS=$(LIBZEBDS) $(LIBZEB) $(LIBNETCDF) $(LIBRDSS) $(XLIBS) $(FLIBS)
SYSLIBS = $(LIBMATH) $(LIBTERMCAP) $(LIBREGEXP)

/* LIBRDSS = /rdss/ui/uilib.a /locallib/librdssutil.a */
DEPLIBS = $(LIBZEBDS) $(LIBZEB) /* $(LIBRDSS) */

/* CLIBS = /usr/local/lib/gcc-lib/sparc-sun-sunos4.1/2.1/libgcc.a */
CLIBS = /local/lib/gcc-lib/sparc-sun-solaris2/2.4.3/libgcc.a

#if UseOpenWindows && (OpenWindowsVersion < 3)
   LABELOBJS=Label.o
#else
   LABELOBJS = 
#endif

/*
 * Need to know whether we can try shared memory
 */
DEFINES = $(SHMDEFINES) /* -DXDEBUG */

# if defined(HPArchitecture) && (! UseGcc)
   ALLOCA=alloca.o
# else
   ALLOCA=
# endif


OBJS =  TimeSeries.o ColorTable.o EventQueue.o LLEvent.o PlotControl.o \
	PlotExec.o UserEvent.o Contour.o FillContour.o \
	DrawText.o RasterPlot.o VectorGrid.o derive.o \
	Lightning.o Track.o GridAccess.o Overlay.o  PositionWidget.o\
	FrameCache.o MovieControl.o rgrid.o bints.o cfit.o AltControl.o \
	Icons.o Skewt.o RBand.o Annotate.o XSection.o LimitWidgets.o \
	ConstAltPlot.o Utilities.o DataMenu.o $(ALLOCA) \
	XYGraph.o PlotPrim.o LayoutControl.o AxisControl.o $(LABELOBJS) \
	XYWind.o XYCommon.o XYContour.o InsertWidget.o AnnotWidget.o \
	XYObservation.o GraphProc.o PDMonitor.o FieldMenu.o ActiveArea.o \
	ModelWidget.o OverlayTimes.o

COBJS = TimeSeries.o ColorTable.o EventQueue.o LLEvent.o PlotControl.o \
	PlotExec.o UserEvent.o Contour.o FillContour.o \
	DrawText.o RasterPlot.o VectorGrid.o derive.o \
	Lightning.o Track.o GridAccess.o Overlay.o  PositionWidget.o\
	FrameCache.o MovieControl.o AltControl.o \
	Icons.o Skewt.o RBand.o Annotate.o XSection.o LimitWidgets.o \
	ConstAltPlot.o Utilities.o DataMenu.o $(ALLOCA) \
	XYGraph.o PlotPrim.o LayoutControl.o AxisControl.o $(LABELOBJS) \
	XYWind.o XYCommon.o XYContour.o InsertWidget.o AnnotWidget.o \
	XYObservation.o GraphProc.o PDMonitor.o FieldMenu.o ActiveArea.o \
	ModelWidget.o OverlayTimes.o

SRCS =  AltControl.c AnnotWidget.c Annotate.c AxisControl.c \
	ColorTable.c ConstAltPlot.c Contour.c DataMenu.c DrawText.c \
	EventQueue.c FillContour.c FrameCache.c GraphProc.c \
	GridAccess.c Icons.c InsertWidget.c LLEvent.c Label.c \
	LayoutControl.c Lightning.c LimitWidgets.c MovieControl.c \
	Overlay.c PlotControl.c PlotExec.c PlotPrim.c PositionWidget.c \
	RBand.c RasterPlot.c Skewt.c TimeSeries.c Track.c UserEvent.c \
	Utilities.c VectorGrid.c XSection.c XYCommon.c XYContour.c \
	XYGraph.c XYObservation.c XYWind.c derive.c  sfont_1.c \
	PDMonitor.c FieldMenu.c ActiveArea.c ModelWidget.c OverlayTimes.c \
	alloca.c

HDRS =  AxisControl.h Contour.h DrawText.h EventQueue.h GC.h GraphProc.h \
	ActiveArea.h LLEvent.h Label.h LabelP.h LayoutControl.h PixelCoord.h \
	PlotPrim.h XYCommon.h derive.h getpagesize.h \
	gp_cmds.h rg_status.h rgrid.h

FSRCS = cfit.F mudras.f rgrid.F bints.f

FOBJS = cfit.o /*mudras.o*/ rgrid.o bints.o

DISTFILES = Imakefile $(SRCS) $(FSRCS) $(HDRS) \
	    GraphProc.state GraphProc.widgets Graphproc.ad

CompleteProgramTarget(gp, $(OBJS), $(DEPLIBS), $(LIBS), $(SYSLIBS))

UILoadFileDepsTarget(graphproc.lf, GraphProc.state, GraphProc.widgets)

InstallAppDefaults(Graphproc)

TestProgramTarget(gtest,$(OBJS),$(DEPLIBS),$(LIBS),$(SYSLIBS))

CflowTarget(gp,GraphProc.o $(OBJS),)

DependTarget()

LintTarget()

DistfilesTarget($(DISTFILES))

fortran.o: $(FOBJS)
	$(LD) -r -Bstatic -o fortran.o $(FOBJS)

C_GP_LIBRARIES=$(LIBZEBDS) $(LIBZEB) $(LIBNETCDF) $(LIBRDSS) $(XLIBS) \
		$(LIBREGEXP) fortran.o $(FLIBS)

TestProgramTarget(c_gp,$(COBJS),$(DEPLIBS),$(C_GP_LIBRARIES),/**/)

