# $Id: Makefile.ini,v 1.1 1995-01-03 22:13:54 case Exp $
#
# Bootstrap Makefile for RDSS Libraries distribution
#

         SHELL = /bin/sh
            RM = rm -f
            MV = mv
          MAKE = make
           TOP = .
   CURRENT_DIR = .
     CONFIGSRC = $(TOP)/config
      IMAKESRC = $(TOP)/imake
 MAKEDEPENDSRC = $(TOP)/Makedepend
      IRULESRC = $(CONFIGSRC)
         IMAKE = $(IMAKESRC)/imake
    IMAKE_INCS = -I$(NEWTOP)$(CONFIGSRC) -I$(NEWTOP)$(IMAKESRC)
     IMAKE_CMD = $(NEWTOP)$(IMAKE) $(IMAKE_INCS) $(IMAKE_DEFINES)
         FLAGS = $(MFLAGS) -f Makefile.ini INCLUDES="-I../config" \
	       BOOTSTRAPCFLAGS="$(BOOTSTRAPCFLAGS)" CC="$(CC)"
MAKEDEPEND_CMD = cd $(MAKEDEPENDSRC); $(RM) Makefile.bak; $(MV) Makefile Makefile.bak; $(MAKE) $(MFLAGS) -f Makefile.bak Makefile; $(MAKE) $(MFLAGS) clean; $(MAKE) $(MFLAGS) $(WORLDOPTS) all; $(MAKE) $(MFLAGS) depend     


all:
	@echo "Please read the README file for installation instructions."
	@echo "You should be using make World to begin the installation..."
	@echo "Do not name your log file make.log or it will be deleted."
	@echo "Check the configuration parameters in the config directory."
	@echo " "
	@echo "If the top-level Makefile gets corrupted, copy Makefile.ini
	@echo "to Makefile and try again."

World:
	@echo ""
	@echo "Building the RDSS Libraries distribution"
	@echo ""
	@echo "##############################################################"
	@echo "#   Have you read the installation instructions in README?   #"
	@echo "##############################################################"
	@echo ""
	@date
	@echo ""
	cd $(IMAKESRC); $(MAKE) $(FLAGS) clean; $(MAKE) $(FLAGS) INCLUDES=-I../config
	-$(RM) Makefile.bak; $(MV) Makefile Makefile.bak
	$(IMAKE_CMD) -DTOPDIR=$(TOP) -DCURDIR=$(CURRENT_DIR)
	$(MAKEDEPEND_CMD)
	$(MAKE) $(MFLAGS) Makefiles
	$(MAKE) $(MFLAGS) clean
	$(MAKE) $(MFLAGS) includes
	$(MAKE) $(MFLAGS) depend
	$(MAKE) $(MFLAGS) $(WORLDOPTS) install
	@echo ""
	@date
	@echo ""
	@echo "Full build of RDSS Libraries complete"
	@echo ""

Makefile:
	cd $(IMAKESRC); $(MAKE) $(FLAGS)
	-$(RM) Makefile.bak; $(MV) Makefile Makefile.bak
	$(IMAKE_CMD) -DTOPDIR=$(TOP) -DCURDIR=$(CURRENT_DIR)
