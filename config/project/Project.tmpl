/**/#-------------------------------------------------------------------------
/**/# Zeb project build parameters
/**/# $Id: Project.tmpl,v 1.12 1993-10-20 22:16:47 corbet Exp $
/**/#-------------------------------------------------------------------------

/*****************************************************************************
 *                                                                           *
 *                            DEFAULT DEFINITONS                             *
 *                                                                           *
 * The following section contains defaults for things specific to the Zeb    *
 * installation.  These can overridden in the various ../imake/*.cf files,   *
 * and in the ./site.def and ./config.h files.  Usually the only file which  *
 * should be changed is config.h!  DO NOT MODIFY THIS FILE!!!		     *
 *                                                                           *
 ****************************************************************************/

#define ProjectZeb

/*
 * Include the original configuration file for Zeb
 */
#define MAKING_MAKEFILE
#include <config.h>

/* ---------------------------------------------------------------------------
 * Extra system-specific information needed by Zeb.  
 * The man stuff is not used presently, but it might be useful someday...
////////////////////////////////////////////////////////////////////////////*/

#ifndef ManDirectoryRoot
#define ManDirectoryRoot /usr/man
#endif
#ifndef ManSuffix
#define ManSuffix	n		/* use just one tab or cpp will die */
#endif
#ifndef LibManSuffix
#define LibManSuffix	3		/* use just one tab or cpp will die */
#endif

#ifndef OpenWinHome
#define OpenWinHome /usr/openwin
#endif

#ifndef XSharedMemory		/* if the X server has the Shm extension */
#if HasShm
#define XSharedMemory YES
#else
#define XSharedMemory NO
#endif 
#endif

#ifndef ShmDefines		/* the defines to use X shared memory */
#if XSharedMemory
#define ShmDefines -DSHM
#else
#define ShmDefines /**/
#endif
#endif

#ifndef LibraryDefines
#define LibraryDefines StandardDefines
#endif

#ifndef HasWritev
#if defined(SunArchitecture)
#define HasWritev	YES
#else
#define HasWritev	NO
#endif
#endif /* ndef HasWritev */

/* --------------------------------------------------------------------------
 * Zeb's Imake project definitions
///////////////////////////////////////////////////////////////////////////*/

#ifndef UseInstalled
#define UseInstalled /* since makedepend is assumed installed */
#endif

#ifndef BuildIncRoot
#define BuildIncRoot $(TOP)/include
#endif
#ifndef BuildIncTop
#define BuildIncTop ..	/* Relative to $(TOP)/include */
#endif

#ifndef BaseDir
#define BaseDir /zeb
#endif

#ifndef DataDir
#define DataDir /zeb/data
#endif

#ifndef BinDir
#define BinDir $(TOP)/bin
#endif

#ifndef LibDir
#define LibDir $(TOP)/lib
#endif

#ifndef IncDir
#define IncDir $(TOP)/include
#endif

#ifndef ConfigDir
#define ConfigDir $(TOP)/config
#endif

#ifndef DependDir
#define DependDir $(UTILSRC)/makedepend
#endif

#ifndef InstallAppDefFiles
#define InstallAppDefFiles YES
#endif

#ifndef InstAppFlags
#define InstAppFlags -m 444
#endif

#ifndef XAppLoadDir
#define XAppLoadDir $(LIBDIR)/resources
#endif

#ifndef RemoveTargetProgramByMoving
#define RemoveTargetProgramByMoving NO
#endif

#ifndef ArAdd
#define ArAdd ar ruv
#endif

#ifndef UseCCMakeDepend
#define UseCCMakeDepend NO
#endif

/* ---------------------------------------------------------------------------
 * User-configurable build settings.  These are just the defaults.  Most of the
 * choices will be made in config.h
////////////////////////////////////////////////////////////////////////////*/

#ifndef UseOpenWindows
#define UseOpenWindows NO
#endif

#ifndef OpenWindowsVersion
#define OpenWindowsVersion 2
#endif

#ifndef UicCmd
#define UicCmd uic	/* Assumes uic in path */
#endif

#ifndef RDSSDir
#define RDSSDir /rdss
#endif

/*///////////////////////////////////////////////////// Includes ///////////*/
/*--------------------------------------------------------------------------*/
/* If no include directory has been defined, the default will just omit an  */
/* include option altogether.  An include option could still be specified at*/
/* run-time by using something like 'make NETCDFINCLUDES=-I/netcdf'	    */
/*--------------------------------------------------------------------------*/

#ifndef NetCDFIncDir
#   define NetCDFIncDir /**/
#   ifndef NetCDFIncludes
#      define NetCDFIncludes /**/
#   endif
#else
#   ifndef NetCDFIncludes
#      define NetCDFIncludes -I$(NETCDFINCDIR)
#   endif
#endif

/*
 * For RDSS, the default include directory will be RDSSDir/include
 */
#ifndef RDSSIncDir
#   define RDSSIncDir $(RDSSDIR)/include
#   ifndef RDSSIncludes
#      define RDSSIncludes -I$(RDSSINCDIR)
#   endif
#else
#   ifndef RDSSIncludes
#      define RDSSIncludes -I$(RDSSINCDIR)
#   endif
#endif

#ifndef XIncDir
#   define XIncDir /**/	/* assume X includes in std search path */
#   ifndef XIncludes
#      define XIncludes /**/
#   endif
#else
#   ifndef XIncludes
#      define XIncludes -I$(XINCDIR)
#   endif
#endif

/*//////////////////////////////////////////////// Libraries //////////////*/
/*-------------------------------------------------------------------------*/

#ifndef RDSSLibDir
#   define RDSSLibDir /**/
#   ifndef RDSSLibrary
#      define RDSSLibrary LoaderLibPrefix -lrdssui -lrdssutil
#   endif
#   ifndef RDSSGraphics
#      define RDSSGraphics LoaderLibPrefix -lrdssgraph
#   endif
#else
#   ifndef RDSSLibrary
#      define RDSSLibrary -L$(RDSSLIBDIR) LoaderLibPrefix -lrdssui -lrdssutil
#   endif
#   ifndef RDSSGraphics
#      define RDSSGraphics -L$(RDSSLIBDIR) LoaderLibPrefix -lrdssgraph
#   endif
#endif

#ifndef NetCDFLibDir
#   define NetCDFLibDir /**/
#   ifndef NetCDFLibrary
#      define NetCDFLibrary LoaderLibPrefix -lnetcdf
#   endif
#else
#   ifndef NetCDFLibrary
#      define NetCDFLibrary -L$(NETCDFLIBDIR) LoaderLibPrefix -lnetcdf
#   endif
#endif

#ifndef XLibDir
#   if UseOpenWindows
#      define XLibDir $(OPENWINHOME)/lib
#   endif
#endif

#ifndef XLibDir
#   define XLibDir /**/
#   ifndef XLibraries
#      define XLibraries LoaderLibPrefix -lXaw LoaderLibPrefix -lXmu \
LoaderLibPrefix -lXt LoaderLibPrefix -lXext LoaderLibPrefix -lX11
#   endif
#endif
#ifndef XLibraries
#   define XLibraries -L$(XLIBDIR) LoaderLibPrefix -lXaw LoaderLibPrefix -lXmu \
LoaderLibPrefix -lXt LoaderLibPrefix -lXext LoaderLibPrefix -lX11
#endif

#ifndef ZebLibrary
#define ZebLibrary LoaderLibPrefix $(LIBDIR)/libZeb.a
#endif

# ifndef ZebDSLibrary
#define ZebDSLibrary LoaderLibPrefix $(LIBDIR)/libZebDS.a
#endif

#ifndef FortranLibraries
#define FortranLibraries LoaderLibPrefix -lF77	/* just a guess */
#endif

#ifndef SudsLibrary
#define SudsLibrary $(RDSSDIR)/suds/libsuds.a
#endif
#ifndef PamCfgLibrary
#define PamCfgLibrary LoaderLibPrefix -lunp
#endif

#ifndef RegexpLibrary
#define RegexpLibrary	/**/	/* expect it to be in the system libraries */
#endif

#ifndef TermcapLibrary
#define TermcapLibrary LoaderLibPrefix -ltermcap
#endif

#ifndef MathLibrary
#define MathLibrary LoaderLibPrefix -lm
#endif

#ifndef SystemLibraries
#   if SystemV || SystemV4
#      define SystemLibraries LoaderLibPrefix -lgen $(MATHLIB) $(TERMCAPLIB)
#   else
#      define SystemLibraries $(MATHLIB) $(TERMCAPLIB)
#   endif
#endif

/*////////////////////////////////////////////// Compiler options /////////*/
/*-------------------------------------------------------------------------*/
#ifndef UseGcc
#define UseGcc NO	/* we'll have to assume they don't have it */
#endif
#ifndef CCompiler
#if UseGcc
#define CCompiler gcc
#else
#define CCompiler CcCmd /* CcCmd is the default compiler set in Imake.tmpl */
#endif
#endif /* CCompiler */
#ifndef DefaultCcc
#define DefaultCcc CC /* could be set in a system's .cf or site.def file */
                      /* this is a reasonable default for Sun's */
#endif
#ifndef CccCompiler /* C++ compiler */
#if UseGcc
#define CccCompiler g++
#else
#define CccCompiler DefaultCcc
#endif
#endif /* CccCompiler */
#ifndef CccOptions
#define CccOptions	/* as nothing */
#endif
#ifndef CccLibs
#if UseGcc
#define CccLibs -lg++
#else
#define CccLibs /* who knows ? */
#endif
#endif /* CccLibs */
#ifndef CCOptions
#define CCOptions DefaultCCOptions
#endif
#ifndef CCStaticOption
#ifdef UseGcc
#define CCStaticOption -static
#else
#define CCStaticOption -Bstatic
#endif
#endif /* CCStaticOption */

#ifndef CDebugFlags
#define CDebugFlags DefaultCDebugFlags
#endif
#ifndef FortDebugFlags
#define FortDebugFlags /* none */
#endif
#ifndef FortOptions
#define FortOptions -O
#endif

/*/////////////////////////////////// Defaults for build options /////////*/
/*------------------------------------------------------------------------*/

#ifndef BuildRealtimeDataStoreTools
#define BuildRealtimeDataStoreTools NO
#endif

#ifndef BuildIngest
#define BuildIngest NO
#endif
#ifndef BuildOptimizer
#define BuildOptimizer NO
#endif
#ifndef BuildDataManager
#define BuildDataManager NO	/* since it requires C++ */
#endif
#ifndef BuildDataUtilities
#define BuildDataUtilities NO
#endif

#ifndef BuildClassIngest
#define BuildClassIngest YES
#endif
#ifndef BuildRadarLimits
#define BuildRadarLimits YES
#endif
#ifndef BuildSLGrabber
#define BuildSLGrabber YE
#endif
#ifndef BuildAircraftIngest
#define BuildAircraftIngest YES
#endif
#ifndef BuildFMIngest
#define BuildFMIngest YES
#endif
#ifndef BuildIngestScheduler
#define BuildIngestScheduler YES
#endif
#ifndef BuildLLPIngest
#define BuildLLPIngest YES
#endif
#ifndef BuildNatsIngest
#define BuildNatsIngest YES
#endif
#ifndef BuildNowradIngest
#define BuildNowradIngest YES
#endif
#ifndef BuildP3Ingest
#define BuildP3Ingest YES
#endif
#ifndef BuildPamIngest
#define BuildPamIngest YES
#endif
#ifndef BuildProfsIngest
#define BuildProfsIngest YES
#endif
#ifndef BuildRadarIngest
#define BuildRadarIngest YES
#endif
#ifndef BuildRsgIngest
#define BuildRsgIngest YES
#endif
#ifndef BuildSatelliteIngest
#define BuildSatelliteingest
#endif


/**/# -----------------------------------------------------------------------
/**/# Zeb make variables; coordinated with config.h and the above defaults
/**/# -----------------------------------------------------------------------

          PATHSEP = /			/* for building filenames */

     BUILDINCROOT = BuildIncRoot	/* root of build include directory */
      BUILDINCDIR = $(BUILDINCROOT)	/* where headers put in inc dir */
      BUILDINCTOP = BuildIncTop		/* top relative to BUILDINCDIR */

/*
 * General directory locations
 */
           BINDIR = BinDir		/* programs */
          INCROOT = IncDir		/* base of where to put header files */
           INCDIR = IncDir		/* The build and install includes  */
           LIBDIR = LibDir		/* Zeb project library */
          DESTDIR = 
        CONFIGDIR = ConfigDir		/* build configuration information */
      XAPPLOADDIR = XAppLoadDir         /* Resource file installation dir */
          RDSSDIR = RDSSDir		/* Top of RDSS installation */
      OPENWINHOME = OpenWinHome

/* 
 * At the moment, this section sets the DEPEND command to an installed version,
 * while IMAKE and MKDIRHIER are set to the distributed locations
 */
            IMAKE = $(IMAKESRC)/imake
           DEPEND = makedepend		/* Assumes in path */
        MKDIRHIER = BourneShell $(SCRIPTSRC)/mkdirhier.sh

        CONFIGSRC = $(TOP)/config
          UTILSRC = $(TOP)/util
        SCRIPTSRC = $(CONFIGSRC)/scripts
           DOCSRC = $(TOP)/doc
         IMAKESRC = $(TOP)/imake
        DEPENDSRC = DependDir
   IMAKE_INCLUDES = -I$(NEWTOP)$(CONFIGSRC) -I$(NEWTOP)$(IMAKESRC)

         IRULESRC = $(CONFIGDIR)
        IMAKE_CMD = $(NEWTOP)$(IMAKE) $(IMAKE_INCLUDES) $(IMAKE_DEFINES)
     ICONFIGFILES = $(CONFIGSRC)/Project.tmpl $(CONFIGSRC)/Zeb.rules \
                    $(CONFIGSRC)/config.h $(IMAKESRC)/Imake.tmpl \
                    $(IMAKESRC)/site.def $(IMAKESRC)/Imake.rules

/*
 * Include directories
 */
       RDSSINCDIR = RDSSIncDir
     NETCDFINCDIR = NetCDFIncDir
          XINCDIR = XIncDir

/*
 * Directory include options; only the TOP_INCLUDES option will always exist
 * on the command line.  The others, except for RDSSIncludes, are empty
 * by default.
 */
     TOP_INCLUDES = -I$(BUILDINCDIR)
     RDSSINCLUDES = RDSSIncludes
        XINCLUDES = XIncludes
   NETCDFINCLUDES = NetCDFIncludes
   CONFIGINCLUDES =

/* 
 * Project-wide include directories.  
 * Local Imakefiles use the INCLUDES variable
 */
   EXTRA_INCLUDES = $(XINCLUDES) $(RDSSINCLUDES) \
		    $(NETCDFINCLUDES) $(CONFIGINCLUDES)

/*
 * Project-wide defines.  
 * It wouldn't hurt to move the DEFINES line only to those
 * Imakefiles which actually care about the SHMDEFINES setting.
 */
       SHMDEFINES = ShmDefines
          DEFINES = $(SHMDEFINES) 

/*
 * Library directories
 */
       RDSSLIBDIR = RDSSLibDir
     NETCDFLIBDIR = NetCDFLibDir
          XLIBDIR = XLibDir

/*
 * Library link command-line options.  These make variables should include
 * any -L options and the -l prefix to library names, or they can explicitly
 * name the archive file (which is what LIBZEB defaults to, which is why it can
 * be included in the default value of DEPLIBS).
 */
           LIBZEB = ZebLibrary
         LIBZEBDS = ZebDSLibrary
        LIBNETCDF = NetCDFLibrary
            FLIBS = FortranLibraries
          LIBRDSS = RDSSLibrary
     LIBRDSSGRAPH = RDSSGraphics
          LIBSUDS = SudsLibrary
           LIBUNP = PamCfgLibrary
        LIBMCIDAS = $(LIBDIR)/libmcidas.a
            XLIBS = XLibraries
          MATHLIB = MathLibrary
       TERMCAPLIB = TermcapLibrary
        LIBREGEXP = RegexpLibrary
    SYS_LIBRARIES = SystemLibraries

          DEPLIBS = $(LIBZEB)

/*
 * Compiler commands and options
 */
               CC = CCompiler
              C++ = CccCompiler
#if UseOpenWindows && OpenWindowsVersion < 3
        CCOPTIONS = CCOptions CCStaticOption
#else
        CCOPTIONS = CCOptions 
#endif /* UseOpenWindows */
      CDEBUGFLAGS = CDebugFlags
         C++FLAGS = CccOptions $(CFLAGS)
          C++LIBS = CccLibs /* variable should be explicitly included in */
                            /* targets for c++ progs 			 */
/*
 * Only set the Fortran compiler explicitly if a value has been defined.
 * Otherwise we'll default to Make's implicit rule value
 */
#ifdef FortranCompiler
              F77 = FortranCompiler
               FC = FortranCompiler
#endif
      FORTOPTIONS = FortOptions
   FORTDEBUGFLAGS = FortDebugFlags
           FFLAGS = $(FORTOPTIONS) $(FORTDEBUGFLAGS)
          FCFLAGS = $(FORTOPTIONS) $(FORTDEBUGFLAGS)

              UIC = UicCmd
            ARADD = ArAdd
     INSTAPPFLAGS = InstAppFlags

/*
 * Our own implicit rules, such as for C++ files (.cc extension)
 */
.cc.o:
	$(C++) $(C++FLAGS) -c $<

/*
 * Rules specific to the Zeb project.  Some of these override rules
 * in Imake.rules, which is included after the project template (this file).
 */
#include <Zeb.rules>
